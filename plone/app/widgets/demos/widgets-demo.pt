<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
      xmlns:tal="http://xml.zope.org/namespaces/tal"
      xmlns:metal="http://xml.zope.org/namespaces/metal"
      xmlns:i18n="http://xml.zope.org/namespaces/i18n"
      metal:use-macro="here/main_template/macros/master"
      i18n:domain="plone.app.widgets"
      lang="en"
      >

    <metal:block fill-slot="javascript_head_slot">
        <!-- Include Google source code pretty print
                http://stackoverflow.com/a/9077471/315168
        -->
        <script
             src="https://google-code-prettify.googlecode.com/svn/loader/run_prettify.js"
             type="text/javascript"></script>

        <style>
            #content pre.prettyprint {
                background: white;
            }
        </style>

        <script type="text/javascript">
            (function($) {
                $(document).ready(function() {
                    $(".form-example").on("click", ".source-code", function(e) {
                        e.preventDefault();
                        $(e.delegateTarget).find(".prettyprint").slideToggle();
                        return false;
                    });
                });
            })(jQuery);
        </script>
    </metal:block>

<body>

    <metal:main fill-slot="main">
        <tal:main-macro metal:define-macro="main">

          <h1 class="documentFirstHeading">Plone fields and widgets demo</h1>

          <div id="skel-contents">
            <tal:form repeat="form view/demos">

                <div class="form-example">
                    <h2 tal:content="form/label|nothing" />

                    <div class="package-info" tal:condition="form/package">


                        <div>
                            <strong>Provided by:</strong>
                            <span tal:content="form/package" />
                        </div>

                        <div>
                            <a href="#" class="source-code">Show example source code</a>
                        </div>
                    </div>

                    <pre style="display: none" class="prettyprint lang-py" tal:content="form/source" />

                    <!-- plone.app.z3cform package provides view ploneform-macros
                         which come with a helpers to render forms. This one
                         will render the form body only. It also makes an assumption
                         that form is presented in "view" TAL variable.

                      -->
                    <tal:with-form-as-view define="view nocall:form">
                        <metal:block use-macro="form/@@ploneform-macros/titlelessform" />
                    </tal:with-form-as-view>

                </div>

            </tal:form>
          </div>

        </tal:main-macro>
    </metal:main>
</body>
</html>